{"version":3,"sources":["webpack:///../node_modules/@theia/core/src/node/file-uri.ts","webpack:///../node_modules/@theia/filesystem/src/common/filesystem.ts","webpack:///../node_modules/@theia/filesystem/src/electron-browser/file-dialog/electron-file-dialog-module.ts","webpack:///../node_modules/@theia/filesystem/src/electron-browser/file-dialog/electron-file-dialog-service.ts"],"names":[],"mappings":"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","file":"28.bundle.js","sourcesContent":["/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { URI as Uri } from 'vscode-uri';\nimport URI from '../common/uri';\nimport { isWindows } from '../common/os';\n\nexport namespace FileUri {\n\n    const windowsDriveRegex = /^([^:/?#]+?):$/;\n\n    /**\n     * Creates a new file URI from the filesystem path argument.\n     * @param fsPath the filesystem path.\n     */\n    export function create(fsPath_: string): URI {\n        return new URI(Uri.file(fsPath_));\n    }\n\n    /**\n     * Returns with the platform specific FS path that is represented by the URI argument.\n     *\n     * @param uri the file URI that has to be resolved to a platform specific FS path.\n     */\n    export function fsPath(uri: URI | string): string {\n        if (typeof uri === 'string') {\n            return fsPath(new URI(uri));\n        } else {\n            /*\n             * A uri for the root of a Windows drive, eg file:\\\\\\c%3A, is converted to c:\n             * by the Uri class.  However file:\\\\\\c%3A is unambiguously a uri to the root of\n             * the drive and c: is interpreted as the default directory for the c drive\n             * (by, for example, the readdir function in the fs-extra module).\n             * A backslash must be appended to the drive, eg c:\\, to ensure the correct path.\n             */\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const fsPathFromVsCodeUri = (uri as any).codeUri.fsPath;\n            if (isWindows) {\n                const isWindowsDriveRoot = windowsDriveRegex.exec(fsPathFromVsCodeUri);\n                if (isWindowsDriveRoot) {\n                    return fsPathFromVsCodeUri + '\\\\';\n                }\n            }\n            return fsPathFromVsCodeUri;\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable max-len */\n\nimport { TextDocumentContentChangeEvent } from 'vscode-languageserver-protocol';\nimport { ApplicationError } from '@theia/core/lib/common';\n\n/**\n * @deprecated since 1.4.0 - in order to support VS Code FS API (https://github.com/eclipse-theia/theia/pull/7908), use `FileService` instead\n */\nexport const FileSystem = Symbol('FileSystem');\nexport interface FileSystem {\n\n    /**\n     * Returns the file stat for the given URI.\n     *\n     * If the uri points to a folder it will contain one level of unresolved children.\n     *\n     * `undefined` if a file for the given URI does not exist.\n     *\n     * @deprecated since 1.4.0 - in order to support VS Code FS API (https://github.com/eclipse-theia/theia/pull/7908), use `FileService.resolve` instead\n     */\n    getFileStat(uri: string): Promise<FileStat | undefined>;\n\n    /**\n     * Finds out if a file identified by the resource exists.\n     *\n     * @deprecated since 1.4.0 - in order to support VS Code FS API (https://github.com/eclipse-theia/theia/pull/7908), use `FileService.exists` instead\n     */\n    exists(uri: string): Promise<boolean>;\n\n    /**\n     * Resolve the contents of a file identified by the resource.\n     *\n     * @deprecated since 1.4.0 - in order to support VS Code FS API (https://github.com/eclipse-theia/theia/pull/7908), use `FileService.read` instead\n     */\n    resolveContent(uri: string, options?: { encoding?: string }): Promise<{ stat: FileStat, content: string }>;\n\n    /**\n     * Updates the content replacing its previous value.\n     *\n     * @deprecated since 1.4.0 - in order to support VS Code FS API (https://github.com/eclipse-theia/theia/pull/7908), use `FileService.write` instead\n     */\n    setContent(file: FileStat, content: string, options?: { encoding?: string }): Promise<FileStat>;\n\n    /**\n     * Updates the content replacing its previous value.\n     *\n     * The optional parameter `overwriteEncoding` can be used to transform the encoding of a file.\n     *\n     * |   | encoding | overwriteEncoding | behaviour |\n     * |---|----------|-------------------|-----------|\n     * | 1 | undefined |    undefined     | read & write file in default encoding |\n     * | 2 | undefined |        ✓         | read file in default encoding; write file in `overwriteEncoding` |\n     * | 3 |     ✓    |     undefined     | read & write file in `encoding` |\n     * | 4 |     ✓    |        ✓         | read file in `encoding`; write file in `overwriteEncoding` |\n     *\n     * @deprecated since 1.4.0 - in order to support VS Code FS API (https://github.com/eclipse-theia/theia/pull/7908), use `FileService.write` instead\n     */\n    updateContent(file: FileStat, contentChanges: TextDocumentContentChangeEvent[], options?: { encoding?: string, overwriteEncoding?: string }): Promise<FileStat>;\n\n    /**\n     * Moves the file to a new path identified by the resource.\n     *\n     * The optional parameter overwrite can be set to replace an existing file at the location.\n     *\n     * |           | missing | file | empty dir |    dir    |\n     * |-----------|---------|------|-----------|-----------|\n     * | missing   |    x    |   x  |     x     |     x     |\n     * | file      |    ✓    |   x  |     x     |     x     |\n     * | empty dir |    ✓    |   x  |     x     | overwrite |\n     * | dir       |    ✓    |   x  | overwrite | overwrite |\n     *\n     * @deprecated since 1.4.0 - in order to support VS Code FS API (https://github.com/eclipse-theia/theia/pull/7908), use `FileService.move` instead\n     */\n    move(sourceUri: string, targetUri: string, options?: FileMoveOptions): Promise<FileStat>;\n\n    /**\n     * Copies the file to a path identified by the resource.\n     *\n     * The optional parameter overwrite can be set to replace an existing file at the location.\n     *\n     * @deprecated since 1.4.0 - in order to support VS Code FS API (https://github.com/eclipse-theia/theia/pull/7908), use `FileService.copy` instead\n     */\n    copy(sourceUri: string, targetUri: string, options?: { overwrite?: boolean, recursive?: boolean }): Promise<FileStat>;\n\n    /**\n     * Creates a new file with the given path. The returned promise\n     * will have the stat model object as a result.\n     *\n     * The optional parameter content can be used as value to fill into the new file.\n     *\n     * @deprecated since 1.4.0 - in order to support VS Code FS API (https://github.com/eclipse-theia/theia/pull/7908), use `FileService.create` instead\n     */\n    createFile(uri: string, options?: { content?: string, encoding?: string }): Promise<FileStat>;\n\n    /**\n     * Creates a new folder with the given path. The returned promise\n     * will have the stat model object as a result.\n     *\n     * @deprecated since 1.4.0 - in order to support VS Code FS API (https://github.com/eclipse-theia/theia/pull/7908), use `FileService.createFolder` instead\n     */\n    createFolder(uri: string): Promise<FileStat>;\n\n    /**\n     * Creates a new empty file if the given path does not exist and otherwise\n     * will set the mtime and atime of the file to the current date.\n     */\n    touchFile(uri: string): Promise<FileStat>;\n\n    /**\n     * Deletes the provided file. The optional moveToTrash parameter allows to\n     * move the file to trash.\n     *\n     * @deprecated since 1.4.0 - in order to support VS Code FS API (https://github.com/eclipse-theia/theia/pull/7908), use `FileService.delete` instead\n     */\n    delete(uri: string, options?: FileDeleteOptions): Promise<void>;\n\n    /**\n     * Returns the encoding of the given file resource.\n     *\n     * @deprecated since 1.4.0 - in order to support VS Code FS API (https://github.com/eclipse-theia/theia/pull/7908) use `FileService.read` without `autoGuessEncoding` option instead\n     */\n    getEncoding(uri: string): Promise<string>;\n\n    /**\n     * Guess encoding of a given file based on its content.\n     *\n     * @deprecated since 1.4.0 - in order to support VS Code FS API (https://github.com/eclipse-theia/theia/pull/7908), use `FileService.read` with `autoGuessEncoding` option instead\n     */\n    guessEncoding(uri: string): Promise<string | undefined>;\n\n    /**\n     * Return list of available roots.\n     */\n    getRoots(): Promise<FileStat[]>;\n\n    /**\n     * Returns a promise that resolves to a file stat representing the current user's home directory.\n     *\n     * @deprecated since 1.4.0 - in order to support VS Code FS API (https://github.com/eclipse-theia/theia/pull/7908), use `EnvVariablesServer.getHomeDirUri` instead\n     */\n    getCurrentUserHome(): Promise<FileStat | undefined>;\n\n    /**\n     * Resolves to an array of URIs pointing to the available drives on the filesystem.\n     *\n     * @deprecated since 1.4.0 - in order to support VS Code FS API (https://github.com/eclipse-theia/theia/pull/7908), use `EnvVariablesServer.getDrives` instead\n     */\n    getDrives(): Promise<string[]>;\n\n    /**\n     * Tests a user's permissions for the file or directory specified by URI.\n     * The mode argument is an optional integer that specifies the accessibility checks to be performed.\n     * Check `FileAccess.Constants` for possible values of mode.\n     * It is possible to create a mask consisting of the bitwise `OR` of two or more values (e.g. FileAccess.Constants.W_OK | FileAccess.Constants.R_OK).\n     * If `mode` is not defined, `FileAccess.Constants.F_OK` will be used instead.\n     *\n     * @deprecated since 1.4.0 - in order to support VS Code FS API (https://github.com/eclipse-theia/theia/pull/7908), use `FileService.access` instead\n     */\n    access(uri: string, mode?: number): Promise<boolean>\n\n    /**\n     * Returns the path of the given file URI, specific to the backend's operating system.\n     * If the URI is not a file URI, undefined is returned.\n     *\n     * USE WITH CAUTION: You should always prefer URIs to paths if possible, as they are\n     * portable and platform independent. Paths should only be used in cases you directly\n     * interact with the OS, e.g. when running a command on the shell.\n     *\n     * @deprecated since 1.4.0 - in order to support VS Code FS API (https://github.com/eclipse-theia/theia/pull/7908), use `FileService.fsPath` instead\n     */\n    getFsPath(uri: string): Promise<string | undefined>\n}\n\n/**\n * @deprecated since 1.4.0 - in order to support VS Code FS API (https://github.com/eclipse-theia/theia/pull/7908), use `FileService.access` instead\n */\nexport namespace FileAccess {\n\n    export namespace Constants {\n\n        /**\n         * Flag indicating that the file is visible to the calling process.\n         * This is useful for determining if a file exists, but says nothing about rwx permissions. Default if no mode is specified.\n         */\n        export const F_OK: number = 0;\n\n        /**\n         * Flag indicating that the file can be read by the calling process.\n         */\n        export const R_OK: number = 4;\n\n        /**\n         * Flag indicating that the file can be written by the calling process.\n         */\n        export const W_OK: number = 2;\n\n        /**\n         * Flag indicating that the file can be executed by the calling process.\n         * This has no effect on Windows (will behave like `FileAccess.F_OK`).\n         */\n        export const X_OK: number = 1;\n\n    }\n\n}\n\nexport interface FileMoveOptions {\n    overwrite?: boolean;\n}\n\nexport interface FileDeleteOptions {\n    moveToTrash?: boolean\n}\n\n/**\n * A file resource with meta information.\n *\n * @deprecated since 1.4.0 - in order to support VS Code FS API (https://github.com/eclipse-theia/theia/pull/7908), use `FileStat` from `@theia/filesystem/lib/common/files` instead\n */\nexport interface FileStat {\n\n    /**\n     * The URI of the file.\n     */\n    uri: string;\n\n    /**\n     * The last modification of this file.\n     */\n    lastModification: number;\n\n    /**\n     * `true` if the resource is a directory. Otherwise, `false`.\n     */\n    isDirectory: boolean;\n\n    /**\n     * The children of the file stat.\n     * If it is `undefined` and `isDirectory` is `true`, then this file stat is unresolved.\n     */\n    children?: FileStat[];\n\n    /**\n     * The size of the file if known.\n     */\n    size?: number;\n\n}\n\nexport namespace FileStat {\n    export function is(candidate: Object | undefined): candidate is FileStat {\n        return typeof candidate === 'object' && ('uri' in candidate) && ('lastModification' in candidate) && ('isDirectory' in candidate);\n    }\n\n    export function equals(one: object | undefined, other: object | undefined): boolean {\n        if (!one || !other || !is(one) || !is(other)) {\n            return false;\n        }\n        return one.uri === other.uri\n            && one.lastModification === other.lastModification\n            && one.isDirectory === other.isDirectory;\n    }\n}\n\n/**\n * @deprecated since 1.4.0 - in order to support VS Code FS API (https://github.com/eclipse-theia/theia/pull/7908), use `FileOperationError` instead\n */\nexport namespace FileSystemError {\n    export const FileNotFound = ApplicationError.declare(-33000, (uri: string, prefix?: string) => ({\n        message: `${prefix ? prefix + ' ' : ''}'${uri}' has not been found.`,\n        data: { uri }\n    }));\n    export const FileExists = ApplicationError.declare(-33001, (uri: string, prefix?: string) => ({\n        message: `${prefix ? prefix + ' ' : ''}'${uri}' already exists.`,\n        data: { uri }\n    }));\n    export const FileIsDirectory = ApplicationError.declare(-33002, (uri: string, prefix?: string) => ({\n        message: `${prefix ? prefix + ' ' : ''}'${uri}' is a directory.`,\n        data: { uri }\n    }));\n    export const FileNotDirectory = ApplicationError.declare(-33003, (uri: string, prefix?: string) => ({\n        message: `${prefix ? prefix + ' ' : ''}'${uri}' is not a directory.`,\n        data: { uri }\n    }));\n    export const FileIsOutOfSync = ApplicationError.declare(-33004, (file: FileStat, stat: FileStat) => ({\n        message: `'${file.uri}' is out of sync.`,\n        data: { file, stat }\n    }));\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from 'inversify';\nimport { FileDialogService } from '../../browser/file-dialog/file-dialog-service';\nimport { ElectronFileDialogService } from './electron-file-dialog-service';\n\nexport default new ContainerModule(bind => {\n    bind(ElectronFileDialogService).toSelf().inSingletonScope();\n    bind(FileDialogService).toService(ElectronFileDialogService);\n});\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { remote, FileFilter, OpenDialogOptions, SaveDialogOptions } from 'electron';\nimport URI from '@theia/core/lib/common/uri';\nimport { isOSX } from '@theia/core/lib/common/os';\nimport { MaybeArray } from '@theia/core/lib/common/types';\nimport { MessageService } from '@theia/core/lib/common/message-service';\nimport { FileStat } from '../../common/files';\nimport { FileAccess } from '../../common/filesystem';\nimport { DefaultFileDialogService, OpenFileDialogProps, SaveFileDialogProps } from '../../browser/file-dialog';\n\n// See https://github.com/electron/electron/blob/v9.0.2/docs/api/dialog.md\n// These properties get extended with newer versions of Electron\ntype DialogProperties = 'openFile' | 'openDirectory' | 'multiSelections' | 'showHiddenFiles' |\n    'createDirectory' | 'promptToCreate' | 'noResolveAliases' | 'treatPackageAsDirectory' | 'dontAddToRecent';\n\n//\n// We are OK to use this here because the electron backend and frontend are on the same host.\n// If required, we can move this single service (and its module) to a dedicated Theia extension,\n// and at packaging time, clients can decide whether they need the native or the browser-based\n// solution.\n//\nimport { FileUri } from '@theia/core/lib/node/file-uri';\n\n@injectable()\nexport class ElectronFileDialogService extends DefaultFileDialogService {\n\n    @inject(MessageService) protected readonly messageService: MessageService;\n\n    async showOpenDialog(props: OpenFileDialogProps & { canSelectMany: true }, folder?: FileStat): Promise<MaybeArray<URI> | undefined>;\n    async showOpenDialog(props: OpenFileDialogProps, folder?: FileStat): Promise<URI | undefined>;\n    async showOpenDialog(props: OpenFileDialogProps, folder?: FileStat): Promise<MaybeArray<URI> | undefined> {\n        const rootNode = await this.getRootNode(folder);\n        if (rootNode) {\n            const { filePaths } = await remote.dialog.showOpenDialog(this.toOpenDialogOptions(rootNode.uri, props));\n            if (filePaths.length === 0) {\n                return undefined;\n            }\n\n            const uris = filePaths.map(path => FileUri.create(path));\n            const canAccess = await this.canReadWrite(uris);\n            const result = canAccess ? uris.length === 1 ? uris[0] : uris : undefined;\n            return result;\n        }\n        return undefined;\n    }\n\n    async showSaveDialog(props: SaveFileDialogProps, folder?: FileStat): Promise<URI | undefined> {\n        const rootNode = await this.getRootNode(folder);\n        if (rootNode) {\n            const { filePath } = await remote.dialog.showSaveDialog(this.toSaveDialogOptions(rootNode.uri, props));\n            if (!filePath) {\n                return undefined;\n            }\n\n            const uri = FileUri.create(filePath);\n            const exists = await this.fileService.exists(uri);\n            if (!exists) {\n                return uri;\n            }\n\n            const canAccess = await this.canReadWrite(uri);\n            return canAccess ? uri : undefined;\n        }\n        return undefined;\n    }\n\n    protected async canReadWrite(uris: MaybeArray<URI>): Promise<boolean> {\n        for (const uri of Array.isArray(uris) ? uris : [uris]) {\n            if (!(await this.fileService.access(uri, FileAccess.Constants.R_OK | FileAccess.Constants.W_OK))) {\n                this.messageService.error(`Cannot access resource at ${uri.path}.`);\n                return false;\n            }\n        }\n        return true;\n    }\n\n    protected toDialogOptions(uri: URI, props: SaveFileDialogProps | OpenFileDialogProps, dialogTitle: string): electron.FileDialogProps {\n        const title = props.title || dialogTitle;\n        const defaultPath = FileUri.fsPath(uri);\n        const filters: FileFilter[] = [{ name: 'All Files', extensions: ['*'] }];\n        if (props.filters) {\n            filters.push(...Object.keys(props.filters).map(key => ({ name: key, extensions: props.filters![key] })));\n        }\n        return { title, defaultPath, filters };\n    }\n\n    protected toOpenDialogOptions(uri: URI, props: OpenFileDialogProps): OpenDialogOptions {\n        const properties = electron.dialog.toDialogProperties(props);\n        const buttonLabel = props.openLabel;\n        return { ...this.toDialogOptions(uri, props, 'Open'), properties, buttonLabel };\n    }\n\n    protected toSaveDialogOptions(uri: URI, props: SaveFileDialogProps): SaveDialogOptions {\n        const buttonLabel = props.saveLabel;\n        const defaultPath = props.inputValue;\n        return { ...this.toDialogOptions(uri, props, 'Save'), buttonLabel, defaultPath };\n    }\n\n}\n\nexport namespace electron {\n\n    /**\n     * Common \"super\" interface of the `electron.SaveDialogOptions` and `electron.OpenDialogOptions` types.\n     */\n    export interface FileDialogProps {\n\n        /**\n         * The dialog title.\n         */\n        readonly title?: string;\n\n        /**\n         * The default path, where the dialog opens. Requires an FS path.\n         */\n        readonly defaultPath?: string;\n\n        /**\n         * Resource filter.\n         */\n        readonly filters?: FileFilter[];\n\n    }\n\n    export namespace dialog {\n\n        /**\n         * Converts the Theia specific `OpenFileDialogProps` into an electron specific array.\n         *\n         * Note: On Windows and Linux an open dialog can not be both a file selector and a directory selector,\n         * so if you set properties to ['openFile', 'openDirectory'] on these platforms, a directory selector will be shown.\n         *\n         * See: https://github.com/electron/electron/issues/10252#issuecomment-322012159\n         */\n        export function toDialogProperties(props: OpenFileDialogProps): Array<DialogProperties> {\n            if (!isOSX && props.canSelectFiles !== false && props.canSelectFolders === true) {\n                throw new Error(`Illegal props. Cannot have 'canSelectFiles' and 'canSelectFolders' at the same times. Props was: ${JSON.stringify(props)}.`);\n            }\n            const properties: Array<DialogProperties> = [];\n            if (!isOSX) {\n                if (props.canSelectFiles !== false && props.canSelectFolders !== true) {\n                    properties.push('openFile');\n                }\n                if (props.canSelectFolders === true && props.canSelectFiles === false) {\n                    properties.push('openDirectory');\n                }\n            } else {\n                if (props.canSelectFiles !== false) {\n                    properties.push('openFile');\n                }\n                if (props.canSelectFolders === true) {\n                    properties.push('openDirectory');\n                    properties.push('createDirectory');\n                }\n            }\n            if (props.canSelectMany === true) {\n                properties.push('multiSelections');\n            }\n            return properties;\n        }\n    }\n}\n"],"sourceRoot":""}